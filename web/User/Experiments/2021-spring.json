{
  "all_procs": {
    "procedure_1.csv": "item,trial type,max time,text,shuffle 1,weight,survey,btn_width,instruct_1,responses_1,instruct_2,responses_2,instruct_3,responses_3,cue_height,cue_width,n_trials,fb_time,\r\n0,instruct,user,information and consent information will go here,off,1,,,,,,,,,,,,,\r\n0,instruct,user,\"You will be presented with a series of faces. <br>\r\nYour task is to identify what emotion the person is feeling.<br>\r\nYou will have 5 seconds to respond after your press the \"\"start\"\" button for each trial.<br>\r\nPress <b>proceed</b> to start some practice trials.\",off,1,,,,,,,,,,,,,\r\n2 to 8,rate_image,user,,practice_trials,1,,100px,How is the person above feeling?,Angry|Disgusted|Fear|Happy|Neutral|Sad|Surprised,,,,,400,400,,,\r\n0,instruct,user,\"Those were the practice trials. If you have any questions please ask the experimentor before proceeding. <br>\r\nOtherwise, please press <b>proceed</b> to start the first of 2 blocks of trials.\",off,1,,,,,,,,,,,,,\r\n9 to 64,rate_image,user,,main_trials,1,,100px,How is the person above feeling?,Angry|Disgusted|Fear|Happy|Neutral|Sad|Surprised,,,,,400,400,,,\r\n0,instruct,user,\"You've completed the first half of the trials, you now need to complete the second half\",off,1,,,,,,,,,,,,,\r\n65 to 120,rate_image,user,,main_trials,1,,100px,How is the person above feeling?,Angry|Disgusted|Fear|Happy|Neutral|Sad|Surprised,,,,,400,400,,,\r\n0,survey,user,,surveys,1,lot-r.csv,,,,,,,,,,,,\r\n0,survey,user,,surveys,1,bfi.csv,,,,,,,,,,,,\r\n0,survey,user,,surveys,1,stai_state_only.csv,,,,,,,,,,,,\r\n0,survey,user,,surveys,1,bfi_extroversion_only.csv,,,,,,,,,,,,\r\n0,survey,user,social media,surveys,1,,,,,,,,,,,,,\r\n0,survey,user,,off,1,demographics.csv,,,,,,,,,,,,"
  },
  "all_stims": {
    "stimuli_1.csv": "cue,identity,emotion,\r\n../User/Stimuli/emo_recognition/practice/WF01_AC.jpg,practice,Angry,\r\n../User/Stimuli/emo_recognition/practice/WF01_CC.jpg,practice,Neutral,\r\n../User/Stimuli/emo_recognition/practice/WF01_DC.jpg,practice,Disgusted,\r\n../User/Stimuli/emo_recognition/practice/WF01_FC.jpg,practice,Fear,\r\n../User/Stimuli/emo_recognition/practice/WF01_HC.jpg,practice,Happy,\r\n../User/Stimuli/emo_recognition/practice/WF01_SC.jpg,practice,Sad,\r\n../User/Stimuli/emo_recognition/practice/WF01_SUR.jpg,practice,Surprised,\r\n../User/Stimuli/emo_recognition/A_female_1_BF15_BW/BF15_AC.jpg,A_female_1_BF15_BW,Angry,\r\n../User/Stimuli/emo_recognition/A_female_1_BF15_BW/BF15_CC.jpg,A_female_1_BF15_BW,Neutral,\r\n../User/Stimuli/emo_recognition/A_female_1_BF15_BW/BF15_DC.jpg,A_female_1_BF15_BW,Disgusted,\r\n../User/Stimuli/emo_recognition/A_female_1_BF15_BW/BF15_FC.jpg,A_female_1_BF15_BW,Fear,\r\n../User/Stimuli/emo_recognition/A_female_1_BF15_BW/BF15_HC.jpg,A_female_1_BF15_BW,Happy,\r\n../User/Stimuli/emo_recognition/A_female_1_BF15_BW/BF15_SC.jpg,A_female_1_BF15_BW,Sad,\r\n../User/Stimuli/emo_recognition/A_female_1_BF15_BW/BF15_SUR.jpg,A_female_1_BF15_BW,Surprised,\r\n../User/Stimuli/emo_recognition/A_female_2_BF17_BW/BF17_AC.jpg,A_female_1_BF17_BW,Angry,\r\n../User/Stimuli/emo_recognition/A_female_2_BF17_BW/BF17_CC.jpg,A_female_1_BF17_BW,Neutral,\r\n../User/Stimuli/emo_recognition/A_female_2_BF17_BW/BF17_DC.jpg,A_female_1_BF17_BW,Disgusted,\r\n../User/Stimuli/emo_recognition/A_female_2_BF17_BW/BF17_FC.jpg,A_female_1_BF17_BW,Fear,\r\n../User/Stimuli/emo_recognition/A_female_2_BF17_BW/BF17_HC.jpg,A_female_1_BF17_BW,Happy,\r\n../User/Stimuli/emo_recognition/A_female_2_BF17_BW/BF17_SC.jpg,A_female_1_BF17_BW,Sad,\r\n../User/Stimuli/emo_recognition/A_female_2_BF17_BW/BF17_SUR.jpg,A_female_1_BF17_BW,Surprised,\r\n../User/Stimuli/emo_recognition/A_male_1_BM15_BW/BM15_AC.jpg,A_male_1_BM15_BW,Angry,\r\n../User/Stimuli/emo_recognition/A_male_1_BM15_BW/BM15_CC.jpg,A_male_1_BM15_BW,Neutral,\r\n../User/Stimuli/emo_recognition/A_male_1_BM15_BW/BM15_DC.jpg,A_male_1_BM15_BW,Disgusted,\r\n../User/Stimuli/emo_recognition/A_male_1_BM15_BW/BM15_FC.jpg,A_male_1_BM15_BW,Fear,\r\n../User/Stimuli/emo_recognition/A_male_1_BM15_BW/BM15_HC.jpg,A_male_1_BM15_BW,Happy,\r\n../User/Stimuli/emo_recognition/A_male_1_BM15_BW/BM15_SC.jpg,A_male_1_BM15_BW,Sad,\r\n../User/Stimuli/emo_recognition/A_male_1_BM15_BW/BM15_SUR.jpg,A_male_1_BM15_BW,Surprised,\r\n../User/Stimuli/emo_recognition/A_male_2_BM09_BW/BM09_AC.jpg,A_male_2_BM09_BW,Angry,\r\n../User/Stimuli/emo_recognition/A_male_2_BM09_BW/BM09_CC.jpg,A_male_2_BM09_BW,Neutral,\r\n../User/Stimuli/emo_recognition/A_male_2_BM09_BW/BM09_DC.jpg,A_male_2_BM09_BW,Disgusted,\r\n../User/Stimuli/emo_recognition/A_male_2_BM09_BW/BM09_FC.jpg,A_male_2_BM09_BW,Fear,\r\n../User/Stimuli/emo_recognition/A_male_2_BM09_BW/BM09_HC.jpg,A_male_2_BM09_BW,Happy,\r\n../User/Stimuli/emo_recognition/A_male_2_BM09_BW/BM09_SC.jpg,A_male_2_BM09_BW,Sad,\r\n../User/Stimuli/emo_recognition/A_male_2_BM09_BW/BM09_SUR.jpg,A_male_2_BM09_BW,Surprised,\r\n../User/Stimuli/emo_recognition/C_female_1_WF09_BW/WF09_AC.jpg,C_female_1_WF09_BW,Angry,\r\n../User/Stimuli/emo_recognition/C_female_1_WF09_BW/WF09_CC.jpg,C_female_1_WF09_BW,Neutral,\r\n../User/Stimuli/emo_recognition/C_female_1_WF09_BW/WF09_DC.jpg,C_female_1_WF09_BW,Disgusted,\r\n../User/Stimuli/emo_recognition/C_female_1_WF09_BW/WF09_FC.jpg,C_female_1_WF09_BW,Fear,\r\n../User/Stimuli/emo_recognition/C_female_1_WF09_BW/WF09_HC.jpg,C_female_1_WF09_BW,Happy,\r\n../User/Stimuli/emo_recognition/C_female_1_WF09_BW/WF09_SC.jpg,C_female_1_WF09_BW,Sad,\r\n../User/Stimuli/emo_recognition/C_female_1_WF09_BW/WF09_SUR.jpg,C_female_1_WF09_BW,Surprised,\r\n../User/Stimuli/emo_recognition/C_female_2_WF03_BW/WF03_AC.jpg,C_female_2_WF03_BW,Angry,\r\n../User/Stimuli/emo_recognition/C_female_2_WF03_BW/WF03_CC.jpg,C_female_2_WF03_BW,Neutral,\r\n../User/Stimuli/emo_recognition/C_female_2_WF03_BW/WF03_DC.jpg,C_female_2_WF03_BW,Disgusted,\r\n../User/Stimuli/emo_recognition/C_female_2_WF03_BW/WF03_FC.jpg,C_female_2_WF03_BW,Fear,\r\n../User/Stimuli/emo_recognition/C_female_2_WF03_BW/WF03_HC.jpg,C_female_2_WF03_BW,Happy,\r\n../User/Stimuli/emo_recognition/C_female_2_WF03_BW/WF03_SC.jpg,C_female_2_WF03_BW,Sad,\r\n../User/Stimuli/emo_recognition/C_female_2_WF03_BW/WF03_SUR.jpg,C_female_2_WF03_BW,Surprised,\r\n../User/Stimuli/emo_recognition/C_male_1_WM06_BW/WM06_AC.jpg,C_male_1_WM06_BW,Angry,\r\n../User/Stimuli/emo_recognition/C_male_1_WM06_BW/WM06_CC.jpg,C_male_1_WM06_BW,Neutral,\r\n../User/Stimuli/emo_recognition/C_male_1_WM06_BW/WM06_DC.jpg,C_male_1_WM06_BW,Disgusted,\r\n../User/Stimuli/emo_recognition/C_male_1_WM06_BW/WM06_FC.jpg,C_male_1_WM06_BW,Fear,\r\n../User/Stimuli/emo_recognition/C_male_1_WM06_BW/WM06_HC.jpg,C_male_1_WM06_BW,Happy,\r\n../User/Stimuli/emo_recognition/C_male_1_WM06_BW/WM06_SC.jpg,C_male_1_WM06_BW,Sad,\r\n../User/Stimuli/emo_recognition/C_male_1_WM06_BW/WM06_SUR.jpg,C_male_1_WM06_BW,Surprised,\r\n../User/Stimuli/emo_recognition/C_male_2_WM05_BW/WM05_AC.jpg,C_male_2_WM05_BW,Angry,\r\n../User/Stimuli/emo_recognition/C_male_2_WM05_BW/WM05_CC.jpg,C_male_2_WM05_BW,Neutral,\r\n../User/Stimuli/emo_recognition/C_male_2_WM05_BW/WM05_DC.jpg,C_male_2_WM05_BW,Disgusted,\r\n../User/Stimuli/emo_recognition/C_male_2_WM05_BW/WM05_FC.jpg,C_male_2_WM05_BW,Fear,\r\n../User/Stimuli/emo_recognition/C_male_2_WM05_BW/WM05_HC.jpg,C_male_2_WM05_BW,Happy,\r\n../User/Stimuli/emo_recognition/C_male_2_WM05_BW/WM05_SC.jpg,C_male_2_WM05_BW,Sad,\r\n../User/Stimuli/emo_recognition/C_male_2_WM05_BW/WM05_SUR.jpg,C_male_2_WM05_BW,Surprised,\r\n../User/Stimuli/emo_recognition/EA_female_1_AF07_BW/AF07_AC.jpg,EA_female_1_AF07_BW,Angry,\r\n../User/Stimuli/emo_recognition/EA_female_1_AF07_BW/AF07_CC.jpg,EA_female_1_AF07_BW,Neutral,\r\n../User/Stimuli/emo_recognition/EA_female_1_AF07_BW/AF07_DC.jpg,EA_female_1_AF07_BW,Disgusted,\r\n../User/Stimuli/emo_recognition/EA_female_1_AF07_BW/AF07_FC.jpg,EA_female_1_AF07_BW,Fear,\r\n../User/Stimuli/emo_recognition/EA_female_1_AF07_BW/AF07_HC.jpg,EA_female_1_AF07_BW,Happy,\r\n../User/Stimuli/emo_recognition/EA_female_1_AF07_BW/AF07_SC.jpg,EA_female_1_AF07_BW,Sad,\r\n../User/Stimuli/emo_recognition/EA_female_1_AF07_BW/AF07_SUR.jpg,EA_female_1_AF07_BW,Surprised,\r\n../User/Stimuli/emo_recognition/EA_female_2_AF01_BW/AF01_AC.jpg,EA_female_2_AF01_BW,Angry,\r\n../User/Stimuli/emo_recognition/EA_female_2_AF01_BW/AF01_CC.jpg,EA_female_2_AF01_BW,Neutral,\r\n../User/Stimuli/emo_recognition/EA_female_2_AF01_BW/AF01_DC.jpg,EA_female_2_AF01_BW,Disgusted,\r\n../User/Stimuli/emo_recognition/EA_female_2_AF01_BW/AF01_FC.jpg,EA_female_2_AF01_BW,Fear,\r\n../User/Stimuli/emo_recognition/EA_female_2_AF01_BW/AF01_HC.jpg,EA_female_2_AF01_BW,Happy,\r\n../User/Stimuli/emo_recognition/EA_female_2_AF01_BW/AF01_SC.jpg,EA_female_2_AF01_BW,Sad,\r\n../User/Stimuli/emo_recognition/EA_female_2_AF01_BW/AF01_SUR.jpg,EA_female_2_AF01_BW,Surprised,\r\n../User/Stimuli/emo_recognition/EA_male_1_AM07_BW/AM07_AC.jpg,EA_male_1_AM07_BW,Angry,\r\n../User/Stimuli/emo_recognition/EA_male_1_AM07_BW/AM07_CC.jpg,EA_male_1_AM07_BW,Neutral,\r\n../User/Stimuli/emo_recognition/EA_male_1_AM07_BW/AM07_DC.jpg,EA_male_1_AM07_BW,Disgusted,\r\n../User/Stimuli/emo_recognition/EA_male_1_AM07_BW/AM07_FC.jpg,EA_male_1_AM07_BW,Fear,\r\n../User/Stimuli/emo_recognition/EA_male_1_AM07_BW/AM07_HC.jpg,EA_male_1_AM07_BW,Happy,\r\n../User/Stimuli/emo_recognition/EA_male_1_AM07_BW/AM07_SC.jpg,EA_male_1_AM07_BW,Sad,\r\n../User/Stimuli/emo_recognition/EA_male_1_AM07_BW/AM07_SUR.jpg,EA_male_1_AM07_BW,Surprised,\r\n../User/Stimuli/emo_recognition/EA_male_2_AM10_BW/AM10_AC.jpg,EA_male_2_AM10_BW,Angry,\r\n../User/Stimuli/emo_recognition/EA_male_2_AM10_BW/AM10_CC.jpg,EA_male_2_AM10_BW,Neutral,\r\n../User/Stimuli/emo_recognition/EA_male_2_AM10_BW/AM10_DC.jpg,EA_male_2_AM10_BW,Disgusted,\r\n../User/Stimuli/emo_recognition/EA_male_2_AM10_BW/AM10_FC.jpg,EA_male_2_AM10_BW,Fear,\r\n../User/Stimuli/emo_recognition/EA_male_2_AM10_BW/AM10_HC.jpg,EA_male_2_AM10_BW,Happy,\r\n../User/Stimuli/emo_recognition/EA_male_2_AM10_BW/AM10_SC.jpg,EA_male_2_AM10_BW,Sad,\r\n../User/Stimuli/emo_recognition/EA_male_2_AM10_BW/AM10_SUR.jpg,EA_male_2_AM10_BW,Surprised,\r\n../User/Stimuli/emo_recognition/SA_female_1_HF02_BW/HF02_AC.jpg,SA_female_1_HF02_BW,Angry,\r\n../User/Stimuli/emo_recognition/SA_female_1_HF02_BW/HF02_CC.jpg,SA_female_1_HF02_BW,Neutral,\r\n../User/Stimuli/emo_recognition/SA_female_1_HF02_BW/HF02_DC.jpg,SA_female_1_HF02_BW,Disgusted,\r\n../User/Stimuli/emo_recognition/SA_female_1_HF02_BW/HF02_FC.jpg,SA_female_1_HF02_BW,Fear,\r\n../User/Stimuli/emo_recognition/SA_female_1_HF02_BW/HF02_HC.jpg,SA_female_1_HF02_BW,Happy,\r\n../User/Stimuli/emo_recognition/SA_female_1_HF02_BW/HF02_SC.jpg,SA_female_1_HF02_BW,Sad,\r\n../User/Stimuli/emo_recognition/SA_female_1_HF02_BW/HF02_SUR.jpg,SA_female_1_HF02_BW,Surprised,\r\n../User/Stimuli/emo_recognition/SA_female_2_HF04_BW/HF04_AC.jpg,SA_female_2_HF04_BW,Angry,\r\n../User/Stimuli/emo_recognition/SA_female_2_HF04_BW/HF04_CC.jpg,SA_female_2_HF04_BW,Neutral,\r\n../User/Stimuli/emo_recognition/SA_female_2_HF04_BW/HF04_DC.jpg,SA_female_2_HF04_BW,Disgusted,\r\n../User/Stimuli/emo_recognition/SA_female_2_HF04_BW/HF04_FC.jpg,SA_female_2_HF04_BW,Fear,\r\n../User/Stimuli/emo_recognition/SA_female_2_HF04_BW/HF04_HC.jpg,SA_female_2_HF04_BW,Happy,\r\n../User/Stimuli/emo_recognition/SA_female_2_HF04_BW/HF04_SC.jpg,SA_female_2_HF04_BW,Sad,\r\n../User/Stimuli/emo_recognition/SA_female_2_HF04_BW/HF04_SUR.jpg,SA_female_2_HF04_BW,Surprised,\r\n../User/Stimuli/emo_recognition/SA_male_1_AM03_BW/AM03_AC.jpg,SA_male_1_AM03_BW,Angry,\r\n../User/Stimuli/emo_recognition/SA_male_1_AM03_BW/AM03_CC.jpg,SA_male_1_AM03_BW,Neutral,\r\n../User/Stimuli/emo_recognition/SA_male_1_AM03_BW/AM03_DC.jpg,SA_male_1_AM03_BW,Disgusted,\r\n../User/Stimuli/emo_recognition/SA_male_1_AM03_BW/AM03_FC.jpg,SA_male_1_AM03_BW,Fear,\r\n../User/Stimuli/emo_recognition/SA_male_1_AM03_BW/AM03_HC.jpg,SA_male_1_AM03_BW,Happy,\r\n../User/Stimuli/emo_recognition/SA_male_1_AM03_BW/AM03_SC.jpg,SA_male_1_AM03_BW,Sad,\r\n../User/Stimuli/emo_recognition/SA_male_1_AM03_BW/AM03_SUR.jpg,SA_male_1_AM03_BW,Surprised,\r\n../User/Stimuli/emo_recognition/SA_male_2_HM10_BW/HM10_AC.jpg,SA_male_2_HM10_BW,Angry,\r\n../User/Stimuli/emo_recognition/SA_male_2_HM10_BW/HM10_CC.jpg,SA_male_2_HM10_BW,Neutral,\r\n../User/Stimuli/emo_recognition/SA_male_2_HM10_BW/HM10_DC.jpg,SA_male_2_HM10_BW,Disgusted,\r\n../User/Stimuli/emo_recognition/SA_male_2_HM10_BW/HM10_FC.jpg,SA_male_2_HM10_BW,Fear,\r\n../User/Stimuli/emo_recognition/SA_male_2_HM10_BW/HM10_HC.jpg,SA_male_2_HM10_BW,Happy,\r\n../User/Stimuli/emo_recognition/SA_male_2_HM10_BW/HM10_SC.jpg,SA_male_2_HM10_BW,Sad,\r\n../User/Stimuli/emo_recognition/SA_male_2_HM10_BW/HM10_SUR.jpg,SA_male_2_HM10_BW,Surprised,\r\n,,,"
  },
  "public_key": "bArZpG6z9fkxAPr/yM+C68+mUyUU2gvg8HrBtVyZpA0=",
  "surveys": {
    "lot-r.csv": [
      [
        "item_name",
        "text",
        "type",
        "answers",
        "values",
        "score: optimism",
        "optional",
        "btn_width",
        ""
      ],
      [
        "Instructions1",
        "<span style='color:#006699'><span style='font-size:20px'>Choose one response that best describes how strongly each item applies to you:</span></span>",
        "instruct",
        "",
        "",
        "",
        "",
        "",
        ""
      ],
      [
        "lotr_1",
        "In uncertain times, I usually expect the best",
        "likert",
        "Strongly Disagree| Disagree| Neutral| Agree| Strongly Agree",
        "0|1|2|3|4",
        "1",
        "no",
        "100px",
        ""
      ],
      [
        "lotr_2",
        "It's easy for me to relax",
        "likert",
        "Strongly Disagree| Disagree| Neutral| Agree| Strongly Agree",
        "0|1|2|3|4",
        "",
        "no",
        "100px",
        ""
      ],
      [
        "lotr_3",
        "If something can go wrong for me it will",
        "likert",
        "Strongly Disagree| Disagree| Neutral| Agree| Strongly Agree",
        "0|1|2|3|4",
        "r1",
        "no",
        "100px",
        ""
      ],
      [
        "lotr_4",
        "I'm always optimistic about my future",
        "likert",
        "Strongly Disagree| Disagree| Neutral| Agree| Strongly Agree",
        "0|1|2|3|4",
        "1",
        "no",
        "100px",
        ""
      ],
      [
        "lotr_5",
        "I enjoy my friends a lot",
        "likert",
        "Strongly Disagree| Disagree| Neutral| Agree| Strongly Agree",
        "0|1|2|3|4",
        "",
        "no",
        "100px",
        ""
      ],
      [
        "lotr_6",
        "It's important for me to keep busy",
        "likert",
        "Strongly Disagree| Disagree| Neutral| Agree| Strongly Agree",
        "0|1|2|3|4",
        "1",
        "no",
        "100px",
        ""
      ],
      [
        "lotr_7",
        "I hardly ever expect things to go my way",
        "likert",
        "Strongly Disagree| Disagree| Neutral| Agree| Strongly Agree",
        "0|1|2|3|4",
        "r1",
        "no",
        "100px",
        ""
      ],
      [
        "lotr_8",
        "I don't get upset too easily",
        "likert",
        "Strongly Disagree| Disagree| Neutral| Agree| Strongly Agree",
        "0|1|2|3|4",
        "",
        "no",
        "100px",
        ""
      ],
      [
        "lotr_9",
        "I rarely count on good things happening to me",
        "likert",
        "Strongly Disagree| Disagree| Neutral| Agree| Strongly Agree",
        "0|1|2|3|4",
        "r1",
        "no",
        "100px",
        ""
      ],
      [
        "lotr_10",
        "Overall, I expect more good things to happen to me than bad",
        "likert",
        "Strongly Disagree| Disagree| Neutral| Agree| Strongly Agree",
        "0|1|2|3|4",
        "1",
        "no",
        "100px",
        ""
      ],
      [
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        ""
      ]
    ],
    "demographics.csv": [
      [
        "item_name",
        "text",
        "Type",
        "Answers",
        "Optional",
        "Values",
        "side_by_side",
        "btn_width"
      ],
      [
        "Gender",
        "Gender",
        "likert",
        "Male|Female|Other",
        "No",
        "",
        "yes",
        "100px"
      ],
      [
        "Age",
        "Age",
        "Number",
        "",
        "No",
        "",
        "",
        ""
      ],
      [
        "Education",
        "Education (which level are you currently in, or is the highest you've completed)",
        "Dropdown",
        "Some high school| High school graduate| Some college, no degree| Associate's degree| Bachelor's degree|Graduate degree (Master's, Doctorate, etc.)",
        "No",
        "",
        "",
        ""
      ],
      [
        "English_Fluency",
        "Do you speak English fluently?",
        "likert",
        "Yes|No",
        "No",
        "",
        "yes",
        "200px"
      ],
      [
        "English_Age",
        "At what age did you start learning English? (write \"0\" if from birth)",
        "Number",
        "",
        "No",
        "",
        "",
        ""
      ],
      [
        "Country",
        "What is your country of residence?",
        "Text",
        "",
        "No",
        "",
        "",
        ""
      ],
      [
        "Handedness",
        "What is your preferred hand?",
        "Likert",
        "Left|Right|Both",
        "No",
        "",
        "yes",
        "100px"
      ],
      [
        "ethnicity",
        "If you would like to please state your ethnicity",
        "Text",
        "",
        "Yes",
        "",
        "",
        ""
      ],
      [
        ""
      ]
    ],
    "bfi.csv": [
      [
        "item_name",
        "text",
        "type",
        "answers",
        "values",
        "score: bfi_extraversion",
        "score: bfi_agreeableness",
        "score: bfi_conscientiousness",
        "score: bfi_neuroticism",
        "score: bfi_openess",
        "optional",
        "btn_width",
        ""
      ],
      [
        "Instructions1",
        "Here are a number of characteristics that may or may not apply to you. For example, do you agree\nthat you are someone who likes to spend time with others? Please indicate the extent to which you agree or disagree with that statement. <br><br>I see myself as someone who...",
        "instruct",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        ""
      ],
      [
        "bfi_1",
        "Is talkative",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "1",
        "",
        "",
        "",
        "",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_2",
        "Tends to find fault with others",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "",
        "r1",
        "",
        "",
        "",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_3",
        "Does a thorough job",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "",
        "",
        "1",
        "",
        "",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_4",
        "Is depressed, blue",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "",
        "",
        "",
        "1",
        "",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_5",
        "Is original, comes up with new ideas",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "",
        "",
        "",
        "",
        "1",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_6",
        "Is reserved",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "r1",
        "",
        "",
        "",
        "",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_7",
        "Is helpful and unselfish with others",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "",
        "1",
        "",
        "",
        "",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_8",
        "Can be somewhat careless",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "",
        "",
        "r1",
        "",
        "",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_9",
        "Is relaxed, handles stress well",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "",
        "",
        "",
        "r1",
        "",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_10",
        "Is curious about many different things",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "",
        "",
        "",
        "",
        "1",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_11",
        "Is full of energy",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "1",
        "",
        "",
        "",
        "",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_12",
        "Starts quarrels with others",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "",
        "r1",
        "",
        "",
        "",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_13",
        "Is a reliable worker",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "",
        "",
        "1",
        "",
        "",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_14",
        "Can be tense",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "",
        "",
        "",
        "1",
        "",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_15",
        "Is ingenious, a deep thinker",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "",
        "",
        "",
        "",
        "1",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_16",
        "Generates a lot of enthusiasm",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "1",
        "",
        "",
        "",
        "",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_17",
        "Has a forgiving nature",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "",
        "1",
        "",
        "",
        "",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_18",
        "Tends to be disorganized",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "",
        "",
        "r1",
        "",
        "",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_19",
        "Worries a lot",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "",
        "",
        "",
        "1",
        "",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_20",
        "Has an active imagination",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "",
        "",
        "",
        "",
        "1",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_21",
        "Tends to be quiet",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "r1",
        "",
        "",
        "",
        "",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_22",
        "Is generally trusting",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "",
        "1",
        "",
        "",
        "",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_23",
        "Tends to be lazy",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "",
        "",
        "r1",
        "",
        "",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_24",
        "Is emotionally stable, not easily upset",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "",
        "",
        "",
        "r1",
        "",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_25",
        "Is inventive",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "",
        "",
        "",
        "",
        "1",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_26",
        "Has an assertive personality",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "1",
        "",
        "",
        "",
        "",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_27",
        "Can be cold and aloof",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "",
        "r1",
        "",
        "",
        "",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_28",
        "Perseveres until the task is finished",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "",
        "",
        "1",
        "",
        "",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_29",
        "Can be moody",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "",
        "",
        "",
        "1",
        "",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_30",
        "Values artistic, aesthetic experiences",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "",
        "",
        "",
        "",
        "1",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_31",
        "Is sometimes shy, inhibited",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "r1",
        "",
        "",
        "",
        "",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_36",
        "Is outgoing, sociable",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "1",
        "",
        "",
        "",
        "",
        "No",
        "100px",
        ""
      ],
      [
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        ""
      ]
    ],
    "stai_state_only.csv": [
      [
        "item_name",
        "text",
        "type",
        "answers",
        "values",
        "score: optimism",
        "optional",
        "btn_width",
        ""
      ],
      [
        "Instructions1",
        "<span style='color:#006699'><span style='font-size:20px'>Read each statement and select the appropriate response to indicate how you feel right now, that is, at this very moment. There are no right or wrong answers. Do not spend too much time on any one statement but give the answer which seems to describe your present feelings best.\r\n</span></span>",
        "instruct",
        "",
        "",
        "",
        "",
        "",
        ""
      ],
      [
        "stai_1",
        "I feel calm",
        "likert",
        "Not at all|A little|Somewhat|Very Much So",
        "0|1|2|3|4",
        "r1",
        "no",
        "150px",
        ""
      ],
      [
        "stai_2",
        "I feel secure",
        "likert",
        "Not at all|A little|Somewhat|Very Much So",
        "0|1|2|3|4",
        "r1",
        "no",
        "150px",
        ""
      ],
      [
        "stai_3",
        "I feel tense",
        "likert",
        "Not at all|A little|Somewhat|Very Much So",
        "0|1|2|3|4",
        "1",
        "no",
        "150px",
        ""
      ],
      [
        "stai_4",
        "I feel strained",
        "likert",
        "Not at all|A little|Somewhat|Very Much So",
        "0|1|2|3|4",
        "1",
        "no",
        "150px",
        ""
      ],
      [
        "stai_5",
        "I feel at ease",
        "likert",
        "Not at all|A little|Somewhat|Very Much So",
        "0|1|2|3|4",
        "1",
        "no",
        "150px",
        ""
      ],
      [
        "stai_6",
        "I feel upset",
        "likert",
        "Not at all|A little|Somewhat|Very Much So",
        "0|1|2|3|4",
        "1",
        "no",
        "150px",
        ""
      ],
      [
        "stai_7",
        "I am presently worrying over possibly misfortunes",
        "likert",
        "Not at all|A little|Somewhat|Very Much So",
        "0|1|2|3|4",
        "1",
        "no",
        "150px",
        ""
      ],
      [
        "stai_8",
        "I feel satisfied",
        "likert",
        "Not at all|A little|Somewhat|Very Much So",
        "0|1|2|3|4",
        "1",
        "no",
        "150px",
        ""
      ],
      [
        "stai_9",
        "I feel frightened",
        "likert",
        "Not at all|A little|Somewhat|Very Much So",
        "0|1|2|3|4",
        "1",
        "no",
        "150px",
        ""
      ],
      [
        "stai_10",
        "I feel uncomfortable",
        "likert",
        "Not at all|A little|Somewhat|Very Much So",
        "0|1|2|3|4",
        "1",
        "no",
        "150px",
        ""
      ],
      [
        "stai_11",
        "I feel self-confident",
        "likert",
        "Not at all|A little|Somewhat|Very Much So",
        "0|1|2|3|4",
        "1",
        "no",
        "150px",
        ""
      ],
      [
        "stai_12",
        "I feel nervous",
        "likert",
        "Not at all|A little|Somewhat|Very Much So",
        "0|1|2|3|4",
        "1",
        "no",
        "150px",
        ""
      ],
      [
        "stai_13",
        "I feel jittery",
        "likert",
        "Not at all|A little|Somewhat|Very Much So",
        "0|1|2|3|4",
        "1",
        "no",
        "150px",
        ""
      ],
      [
        "stai_14",
        "I feel indecisive",
        "likert",
        "Not at all|A little|Somewhat|Very Much So",
        "0|1|2|3|4",
        "1",
        "no",
        "150px",
        ""
      ],
      [
        "stai_15",
        "I am relaxed",
        "likert",
        "Not at all|A little|Somewhat|Very Much So",
        "0|1|2|3|4",
        "1",
        "no",
        "150px",
        ""
      ],
      [
        "stai_16",
        "I feel content",
        "likert",
        "Not at all|A little|Somewhat|Very Much So",
        "0|1|2|3|4",
        "1",
        "no",
        "150px",
        ""
      ],
      [
        "stai_17",
        "I am worried",
        "likert",
        "Not at all|A little|Somewhat|Very Much So",
        "0|1|2|3|4",
        "1",
        "no",
        "150px",
        ""
      ],
      [
        "stai_18",
        "I feel confused",
        "likert",
        "Not at all|A little|Somewhat|Very Much So",
        "0|1|2|3|4",
        "1",
        "no",
        "150px",
        ""
      ],
      [
        "stai_19",
        "I feel steady",
        "likert",
        "Not at all|A little|Somewhat|Very Much So",
        "0|1|2|3|4",
        "1",
        "no",
        "150px",
        ""
      ],
      [
        "stai_20",
        "I feel pleasant",
        "likert",
        "Not at all|A little|Somewhat|Very Much So",
        "0|1|2|3|4",
        "1",
        "no",
        "150px",
        ""
      ],
      [
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        ""
      ]
    ],
    "bfi_extroversion_only.csv": [
      [
        "item_name",
        "text",
        "type",
        "answers",
        "values",
        "score: bfi_extraversion",
        "optional",
        "btn_width",
        ""
      ],
      [
        "Instructions1",
        "Here are a number of characteristics that may or may not apply to you. For example, do you agree\nthat you are someone who likes to spend time with others? Please indicate the extent to which you agree or disagree with that statement. <br><br>I see myself as someone who...",
        "instruct",
        "",
        "",
        "",
        "",
        "",
        ""
      ],
      [
        "bfi_1",
        "Is talkative",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "1",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_6",
        "Is reserved",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "r1",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_11",
        "Is full of energy",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "1",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_16",
        "Generates a lot of enthusiasm",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "1",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_21",
        "Tends to be quiet",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "r1",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_26",
        "Has an assertive personality",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "1",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_31",
        "Is sometimes shy, inhibited",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "r1",
        "No",
        "100px",
        ""
      ],
      [
        "bfi_36",
        "Is outgoing, sociable",
        "likert",
        "Disagree Strongly|Disagree a little|Neither agree nor disagree|Agree a little|Agree strongly",
        "1|2|3|4|5",
        "1",
        "No",
        "100px",
        ""
      ],
      [
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        ""
      ]
    ]
  },
  "trialtypes": {
    "instruct": "<!--\n/*  Collector (Garcia, Kornell, Kerr, Blake & Haffey)\n    A program for running experiments on the web\n    Copyright 2012-2016 Mikey Garcia & Nate Kornell\n\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License version 3 as published by\n    the Free Software Foundation.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>\n \t\t\n\t\tKitten/Cat release (2019-2021) author: Dr. Anthony Haffey (team@someopen.solutions)\t\t\n*/\n-->\n<style>\n#instruct_text{\n  margin:auto;\n  width:500px;\n  padding:50px;\n  max-height:600px;\n  text-align: center;  \n}\n#proceed_button{\n  position:absolute;\n  right: 20px;\n}\n#trial_contents{\n  position: absolute;\n  top:0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin:auto;\n  width:600;\n  height:600;\n}\n</style>\n<div id=\"trial_contents\">\n  <div id=\"instruct_text\">{{text}}</div>\n  <div>\n    <button class=\"btn btn-primary\" id=\"proceed_button\" onclick=\"Trial.submit()\">Proceed</button>\n  </div>\n</div>",
    "rate_image": "<!--\nThis is from Borcsok, Fitzgibbins and Haffey (2020) investigation into gambling and alcohol behaviour\n-->\n<style>\n#face_img{\n  width:{{cue_width}};\n  height:{{cue_height}};\n  display: block;\n  margin-left: auto;\n  margin-right: auto;\n  display:none;\n}\n#response_div{\n  margin: auto;\n  width: 100%;\n  padding: 10px;\n  text-align: center;\n  display:none;\n}\n\n#start_btn{\n  position: absolute;\n  top:0;\n  bottom: 300;\n  left: 0;\n  right: 0;\n  margin:auto;\n  width:200;\n  height:50;\n}\n\n#submit_btn{\n  margin:0 auto;\n  display:none;\n}\n.response_btn{\n  margin:5px;\n  display:none;\n  width:{{btn_width}};\n}\n</style>\n<button class=\"btn btn-primary btn-lg\" id=\"start_btn\">Start</button>\n<img src=\"{{cue}}\" id=\"face_img\"/>  <!-- if you want to refer to a local image, you need to identify it's relative location to RunStudy.html -->\n<div id=\"response_div\"></div>\n<div id=\"button_container\">\n  <button class=\"btn btn-danger\" onclick=\"Trial.submit()\" id=\"submit_btn\">Submit</button>\n</div>\n<input type=\"hidden\" name=\"face_response\" id=\"face_response\"/>\n<script>\nno_stims = 0;\nresp_div_html = \"\";\nresp_upper    = 0;\nresponses_array =   [\n  \"{{responses_1}}\",\n  \"{{responses_2}}\",\n  \"{{responses_3}}\"\n];\ninstruction_array = [\n  \"{{instruct_1}}\",\n  \"{{instruct_2}}\",\n  \"{{instruct_3}}\"\n];\n\nrow_classes = [\n  \"primary\",\n  \"info\",\n  \"secondary\"\n];\n\nfor(var i = 0; i < 3; i++){\n  responses = responses_array[i];\n  if(responses == \"\"){\n    break;\n  }\n  no_stims++;\n  \n  responses = responses.split(\"|\");\n  resp_div_html += \"<h3 class='text-\" + row_classes[i] + \"'>\" +  instruction_array[i] + \"</h3>\";\n  resp_div_html += \"<div style='margin:10px'>\";\n  resp_div_html += responses.map(function(response){\n    return \"<button name='face_rating_\" + (i+1) + \"' class='btn btn-\" + row_classes[i] + \" response_btn'>\" + response + \"</button>\";\n  }).join(\"\");\n  resp_div_html += \"<input type='hidden' id='face_response_\" + (i+1) + \"' name='face_response_\" + (i+1) + \"'>\";\n  resp_div_html += \"</div>\";\n};\n\n$(\"#response_div\").html(resp_div_html);\n$(\".response_btn\").on(\"click\",function(){\n  var response_id = $(this).attr(\"name\").replace(\"rating\",\"response\");\n  $(\"#\" + response_id).val(this.innerHTML);\n  $('[name=\"' + $(this).attr(\"name\") + '\"]').removeClass(\"btn-danger\");\n  $(this).addClass(\"btn-danger\");\n  check_responses();\n});\nfunction check_responses(){\n  valid_responses = 0;\n  for(var i = 1; i < no_stims + 1; i++){\n    if($(\"#face_response_\" + i).val() !== \"\"){\n      valid_responses++;\n    }\n  }\n  if(valid_responses == no_stims){\n    $(\"#submit_btn\").click();\n  }\n}\n\n$(\"#start_btn\").on(\"click\",function(){\n  $(\"#start_btn\").hide();\n  $(\"#face_img\").css(\"display\",\"block\");\n  $(\"#response_div\").css(\"display\",\"block\");\n  $(\".response_btn\").show();\n  setTimeout(function(){\n    $(\"#submit_btn\").click();\n  },5000);  \n});\n</script>",
    "survey": "<!--\r\n  Author: Dr. Anthony Haffey\r\n\r\n  Collector: Cat/Kitten/Cat release\r\n  A program for running experiments on the web\r\n  Copyright 2012-2018 Mikey Garcia & Nate Kornell\r\n\r\n\r\n  This program is free software: you can redistribute it and/or modify\r\n  it under the terms of the GNU General Public License version 3 as published by\r\n  the Free Software Foundation.\r\n\r\n  This program is distributed in the hope that it will be useful,\r\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n  GNU General Public License for more details.\r\n\r\n  You should have received a copy of the GNU General Public License\r\n  along with this program.  If not, see <http://www.gnu.org/licenses/>\r\n\r\n  Kitten/Cat release (2019-2021) author: Dr. Anthony Haffey (team@someopen.solutions)\r\n-->\r\n<style>\r\nbody{\r\n  background-color:#5F9EA0;\r\n  width:100%;\r\n  height:100%;\r\n}\r\ntd{\r\n  padding:10px;\r\n  vertical-align: top;\r\n}\r\n\r\n/*\r\n*\telements by id\r\n*/\r\n\r\n#content{\r\n  width:95%;\r\n}\r\n#proceed_button{\r\n  display:none;\r\n  float:right;\r\n}\r\n#this_survey_id{\r\n  padding:            20px;\r\n  display:            none;\r\n}\r\n#survey_outline{\r\n\tposition: \t\t\t\t\tfixed;\r\n  top: \t\t\t\t\t\t\t\t50%;\r\n  left: \t\t\t\t\t\t\t50%;\r\n\theight: \t\t\t\t\t\t90%;\r\n\toverflow: \t\t\t\t\tauto;\r\n\t-webkit-transform: \ttranslate(-50%, -50%);\r\n  transform: \t\t\t\t\ttranslate(-50%, -50%);\r\n  background-color: \twhite;\r\n\tmin-width:        \t900px;\r\n\tmax-width:        \t9000px;\r\n\tborder-radius:    \t20px;\r\n  border-color:     \t#069;\r\n  border-style:     \tsolid;\r\n  border-width:     \t5px;\r\n\tpadding:            10px;\r\n}\r\n#survey_tabs{\r\n  padding:            20px;\r\n}\r\n\r\n\r\n/*\r\n*\telements by class\r\n*/\r\n.feedback_span_multiple{\r\n  display: none;\r\n  margin:  10px;\r\n}\r\n.feedback_span_single{\r\n  display: none;\r\n  padding: 10px;\r\n}\r\n.likert_table td{\r\n  padding:    1px;\r\n  text-align: center;\r\n}\r\n.likert_table td:hover{\r\n  color: blue;\r\n}\r\n.score_total{\r\n  display: none;\r\n}\r\n.show_tab{\r\n  margin: 5px;\r\n}\r\n.survey_btn{\r\n\twhite-space: normal;\r\n\tword-wrap: \t initial;\r\n}\r\n.table_break{\r\n\twidth:    100%;\r\n\theight:   300px;\r\n\toverflow: auto;\r\n}\r\n\r\n\r\n/*\r\n* by Bora Alp Arat at https://stackoverflow.com/questions/21684101/css-vertical-scrollbar-padding-left-right-in-ul-possible\r\n*/\r\n::-webkit-scrollbar {\r\n  width: 14px;\r\n  height: 18px;\r\n}\r\n::-webkit-scrollbar-thumb {\r\n  height: 6px;\r\n  border: 4px solid rgba(0, 0, 0, 0);\r\n  background-clip: padding-box;\r\n\t-webkit-border-radius: 7px;\r\n  background-color: rgba(0, 102, 153, 0.5);\r\n  -webkit-box-shadow: inset -1px -1px 0px rgba(0, 0, 0, 0.05), inset 1px 1px 0px rgba(0, 0, 0, 0.05);\r\n}\r\n::-webkit-scrollbar-button {\r\n  width: 0;\r\n  height: 0;\r\n  display: none;\r\n}\r\n::-webkit-scrollbar-corner {\r\n  background-color: transparent;\r\n}\r\n</style>\r\n<div id=\"everything\">\r\n\t<div id=\"survey_outline\"></div>\r\n</div>\r\n<script>\r\n/////////////////////////\r\n// Retrieving settings //\r\n/////////////////////////\r\n\r\nif(typeof(settings) !== \"undefined\"){\r\n  settings = [settings];\r\n} else {\r\n  settings = {};\r\n}\r\n\r\n//////////////////////////////////\r\n// vertical vs. horizontal tabs //\r\n//////////////////////////////////\r\n\r\nif(typeof(settings.tab_hor_vert) == \"undefined\" || settings.tab_hor_vert.toLowerCase() == \"horizontal\"){\r\n  settings.tab_hor_vert = \"horizontal\";\r\n  $(\"#survey_outline\").html(  '<div id=\"please_wait_div\">Loading... Please wait</div>'+\r\n                              '<div id=\"this_survey_id\" class=\"needs-validation\" novalidate></div>'+\r\n                              '<div id=\"survey_tabs\" style=\"text-align:right\" class=\"border-top border-primary\"></div><input type=\"submit\" value=\"Proceed\" class=\"btn btn-primary\" id=\"proceed_button\">');\r\n\r\n} else if (settings.tab_hor_vert.toLowerCase() == \"vertical\"){\r\n  $(\"#survey_outline\").html( '<table>'+\r\n                                '<tr>'+\r\n                                  '<td valign=\"top\" class=\"border-right border-primary\">'+\r\n                                    '<div id=\"survey_tabs\"></div></td>' +\r\n                                  '<td>'+\r\n                                    '<div id=\"please_wait_div\">Please wait while survey is downloading</div>'+\r\n                                    '<div id=\"this_survey_id\" class=\"needs-validation\" novalidate></div>' +\r\n                                    '<input type=\"button\" value=\"Proceed\" class=\"btn btn-primary\" id=\"proceed_button\">'+\r\n                                  '</td>'+\r\n                                '</tr>'+\r\n                              '</table>');\r\n} else if(settings.tab_hor_vert.toLowerCase() == \"none\"){\r\n  $(\"#survey_outline\").html(  '<div id=\"survey_tabs\" style=\"display:none\"></div>' +\r\n                              '<div id=\"please_wait_div\">Please wait while survey is downloading</div>'+\r\n                              '<div id=\"this_survey_id\" class=\"needs-validation\" novalidate></div>');\r\n} else {\r\n  bootbox.alert(\"If you are the researcher, please check the 'settings for this survey. The input for 'tab_hor_vert' appears to be invalid. Please change it to 'horizontal' or 'vertical' or 'none' or remove 'tab_hot_vert' altogether from the settings, which will make the tabs invisible\");\r\n}\r\n</script>\r\n\r\n<span id=\"scales_span\"></span>\r\n\r\n<script>\r\n\r\n//////////////////////\r\n// Defining objects //\r\n//////////////////////\r\n\r\npage_break_management = {\r\n  breaks_remaining : 0,\r\n  breaks_index     : 0\r\n}\r\n\r\nproceed_object = {\r\n  type:[],\r\n  name:[],\r\n  break_no:[]\r\n};\r\n\r\nscoring_object={\r\n  scales:[],\r\n  scale_scores:[],\r\n  update_scales:function(this_survey){\r\n    headers = Object.keys(this_survey[0]);\r\n    this.scales = headers.filter(elm => elm.includes(\"score:\"));\r\n    var scales_html = '';\r\n    this.scales.forEach(function(element){\r\n      element = element.replace(\": \",\":\");\r\n      scales_html += \"<input name='\"+element.replace(/ |:/g,\"_\")+\"' class='score_total \"+element.replace(/ |:/g,\"_\")+\"' disabled>\";\r\n    });\r\n    $(\"#scales_span\").html(scales_html);\r\n  }\r\n}\r\n\r\nsurvey_obj = {};\r\n\r\n\r\n/////////////////////\r\n// Element actions //\r\n/////////////////////\r\n\r\n/*\r\n$(function() {\r\n  $( \".datepicker\" ).datepicker({\r\n    dateFormat : 'mm/dd/yy',\r\n    changeMonth : true,\r\n    changeYear : true,\r\n    yearRange: '-100y:c+nn',\r\n    maxDate: '-1d'\r\n  });\r\n});\r\n*/\r\n\r\n\r\n$('#ExperimentContainer').css('transform','scale(1,1)');\r\n\r\n$(\"#proceed_button\").on(\"click\",function(){\r\n  var proceed = true;\r\n  var tabs    = document.getElementsByClassName('show_tab active');\r\n  if(tabs.length > 0){\r\n    var current_tab       = document.getElementsByClassName('show_tab active')[0]\r\n                                    .id\r\n                                    .replace(\"_button\", \"\")\r\n                                    .replace(\"tab_\",    \"\");\r\n    var response_elements = $('#table_'+current_tab).find('.response_element');\r\n\r\n  } else {\r\n    response_elements = $(\".table_break:visible\").find(\".response_element\");\r\n  }\r\n\r\n  for(var i = 0; i < response_elements.length; i++){\r\n    [this_row_no,item_name] = retrieve_row_no_item_name(response_elements[i]);\r\n    var this_optional = survey_obj.data[this_row_no].optional.toLowerCase();\r\n\r\n    if(this_optional.indexOf(\"no\") !== -1){\r\n      this_optional = this_optional.split(\"-\");       // find out whether there's a minimal number of responses\r\n      if(this_optional.length == 1){                  // default is that length needs to be at least 1\r\n        var min_resp_length = 1;\r\n      } else if(this_optional.length == 2) {\r\n        var min_resp_length = this_optional[1];\r\n      } else {\r\n        bootbox.alert(\"Error - you appear to have too many '-' characters in the 'optional' column\");\r\n        return false;\r\n      }\r\n    } else {\r\n      min_resp_length = 0;\r\n    }\r\n\r\n\r\n    var quest_resp = isJSON($(\"#\"+response_elements[i].id).val());\r\n    if (quest_resp.length < min_resp_length){\r\n      proceed = false;\r\n\t\t\t$(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).removeClass(\"text-dark\");\r\n      $(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).removeClass(\"text-success\");\r\n      $(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).addClass(\"text-danger\");\r\n    } else {\r\n\t\t\t$(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).removeClass(\"text-dark\");\r\n      $(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).removeClass(\"text-danger\");\r\n      $(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).addClass(\"text-success\");\r\n    }\r\n  }\r\n\r\n  if(current_tab == survey_obj.tabs && proceed){\r\n    if(typeof(sql_surveys) == \"undefined\"){\r\n      //$(\".table_break\");\r\n      var next_table_no = parseFloat($(\".table_break:visible\")[0].id.replace(\"table\",\"\")) + 1;\r\n\r\n      if($(\".table_break#table\"+next_table_no).length == 0){\r\n        if(typeof(Trial) !== \"undefined\"){\r\n          Trial.submit();\r\n        } else {\r\n          bootbox.alert(\"You've finished! Click on the preview button to restart.\")\r\n        }\r\n      } else {\r\n        $(\".table_break\").hide();\r\n        $(\".table_break#table\" + next_table_no).show();\r\n      }\r\n    } else {\r\n      $(\"#survey_outline\").html(\"<h1> You have finished the preview of this survey.</h1>\");\r\n    }\r\n  } else if(current_tab < survey_obj.tabs && proceed) {\r\n    current_tab ++;\r\n    $(\"#tab_\"+current_tab+\"_button\").removeClass(\"btn-secondary\");\r\n    $(\"#tab_\"+current_tab+\"_button\").removeClass(\"disabled\");\r\n    $(\"#tab_\"+current_tab+\"_button\").addClass(\"btn-outline-dark\");\r\n    $(\"#tab_\"+current_tab+\"_button\").click();\r\n  } else if(proceed == false){\r\n    bootbox.alert(\"You have failed to complete at least one compulsory input.\");\r\n  } else if(current_tab > survey_obj.tabs){\r\n    bootbox.alert(\"Error - please contact the Collector team about this problem, error 'Survey_001'.\");\r\n  }\r\n});\r\n\r\n//by qwerty at https://stackoverflow.com/questions/2116558/fastest-method-to-replace-all-instances-of-a-character-in-a-string\r\nString.prototype.replaceAll = function(str1, str2, ignore){\r\n  return this.replace(new RegExp(str1.replace(/([\\/\\,\\!\\\\\\^\\$\\{\\}\\[\\]\\(\\)\\.\\*\\+\\?\\|\\<\\>\\-\\&])/g,\"\\\\$&\"),(ignore?\"gi\":\"g\")),(typeof(str2)==\"string\")?str2.replace(/\\$/g,\"$$$$\"):str2);\r\n}\r\n\r\n\r\n///////////////\r\n// Functions //\r\n///////////////\r\n\r\nfunction clean_item(this_item){\r\n  if(this_item.indexOf(\"'\") !== -1 |\r\n     this_item.indexOf('\"') !== -1){\r\n    bootbox.alert(\"Please avoid apostraphe's or quote marks in the responses the participant can give. These cause problems with smooth running of surveys. This occurs when you wrote:<br><br>\" + this_item);\r\n  }\r\n\r\n  /*\r\n  this_item = this_item.replaceAll(\"'\",\"\")\r\n                       .replaceAll('\"','');\r\n  */\r\n\r\n  return(this_item);\r\n}\r\n\r\nfunction load_survey(survey){\r\n  // are we in preview?\r\n  /////////////////////\r\n  if(typeof(parent.master_json) !== \"undefined\" && parent.master_json.surveys.preview){     // Yes\r\n    survey_content = survey;                                                    // i.e. the content has been passed through directly\r\n    survey_obj.mods = parent.master_json.mods;                                //no need to be efficient in preview\r\n\r\n  } else {                                                                      // No\r\n    survey = survey.toLowerCase().replace(\".csv\",\"\") + \".csv\";\r\n\r\n    if(typeof(parent.parent.exp_json.surveys) !== \"undefined\" &&\r\n       typeof(parent.parent.exp_json.surveys[survey]) !== \"undefined\"){\r\n      survey_content = parent.parent.exp_json.surveys[survey];\r\n      survey_obj.mods = parent.parent.exp_json.mods;                     //take mods from exp_json\r\n\r\n    } else if(typeof(parent.parent.exp_json.surveys) !== \"undefined\" &&\r\n\t\t\t\t\t\t\ttypeof(parent.parent.exp_json.surveys[survey.replace(\".csv\",\"\")])){\r\n\t\t\tsurvey_content = parent.parent.exp_json.surveys[survey.replace(\".csv\",\"\")];\r\n      survey_obj.mods = parent.parent.exp_json.mods;                     //take mods from exp_json\r\n\t\t}\telse {\r\n      bootbox.alert(\"Survey \" + survey  + \" doesn't appear to exist\");\r\n    }\r\n  }\r\n  process_returned_questionnaire(survey_content);\r\n}\r\n\r\nfunction generate_feedback_string(feedback_array,this_index,feedback_color,row_no,this_row){\r\n  if(feedback_array){                 //i.e. if it's not null\r\n    if(feedback_array.length > 1){\r\n      return \"<div class='feedback_span_multiple \"+this_row[\"item_name\"].toLowerCase()+\"_feedback' style='color:\"+feedback_color[this_index]+\"'>\"+feedback_array[this_index]+\"</div>\";\r\n    } else {\r\n      return \"<div class='feedback_span_single \"+this_row[\"item_name\"].toLowerCase()+\"_feedback' style='color:\"+feedback_color[this_index]+\"'>\"+feedback_array[this_index]+\"</div>\";\r\n    }\r\n  } else {\r\n    return \"\";\r\n  }\r\n}\r\n\r\nfunction isJSON(str) {\r\n  try {\r\n    return JSON.parse(str);\r\n  } catch (e) {\r\n    return str;\r\n  }\r\n}\r\n\r\n\r\nfunction likert_update(this_element,this_response,this_value){\r\n  [row_no,item_name] = retrieve_row_no_item_name(this_element);\r\n  $(\".row_\"+row_no).removeClass(\"active\");\r\n  $(\".row_\"+row_no).removeClass(\"btn-primary\");\r\n  $(\".row_\"+row_no).addClass(\"btn-outline-primary\");\r\n  $(this_element).removeClass(\"btn-outline-primary\");\r\n  $(this_element).addClass(\"btn-primary\");\r\n  $(\"#survey_\"+item_name+\"_response\").val(this_response);\r\n  response_check(this_element);\r\n}\r\n\r\n\r\nfunction process_item_score(survey_obj,row_no,values_col,this_response,item,values_reverse){\r\n  item_values       = survey_obj.data[row_no][values_col].split(\"|\");\r\n  if(typeof(values_reverse) !== \"undefined\" && values_reverse == \"r\"){\r\n    item_values.reverse();\r\n  }\r\n  item_answers      = survey_obj.data[row_no][\"answers\"].split(\"|\");\r\n  var this_value    = item_values[item_answers.indexOf(this_response)];\r\n  $(\"#survey_\" + item + \"_score\").val(this_value);\r\n  if(typeof(this_value) !== \"undefined\"){\r\n    return parseFloat(this_value);\r\n  }\r\n}\r\n\r\nfunction process_returned_questionnaire(data){\r\n  survey_obj.data = data;\r\n  survey_obj.data = Papa.parse(Papa.unparse(survey_obj.data),{\r\n                      header:true,\r\n                      beforeFirstChunk: function(chunk) {\r\n                        var rows = chunk.split( /\\r\\n|\\r|\\n/ );\r\n                        var headings = rows[0].toLowerCase();\r\n                        rows[0] = headings;\r\n                        return rows.join(\"\\r\\n\");\r\n                      },\r\n                    }).data;\r\n\r\n  var col_headers = Object.keys(survey_obj.data[0]);\r\n  survey_obj.scales = {};\r\n\r\n  col_headers.forEach(function(header){\r\n    if(header.indexOf(\"score:\")==0){\r\n      var original_header = header;\r\n      header = header.replace(\"score: \",\"\");\r\n      header = header.replace(\"score:\",\"\");\r\n\r\n      survey_obj.scales[header] = {};\r\n      survey_obj.scales[header].questions = {};\r\n\r\n      //identify which questions\r\n      for(var i = 1; i< survey_obj.data.length; i++){\r\n        row = survey_obj.data[i];\r\n        if(row[original_header] !== \"\" && typeof(row[original_header]) !== \"undefined\"){\r\n          survey_obj.scales[header].questions[i] = row[original_header];\r\n        }\r\n      }\r\n    }\r\n  });\r\n  write_survey(survey_obj.data,\"this_survey_id\");\r\n  $(\"#please_wait_div\").hide();\r\n  $(\"#proceed_button\").show();\r\n\r\n  $('html, body').animate({\r\n    scrollTop: $(\"#survey_outline\").offset().top\r\n  }, 1000);\r\n}\r\n\r\nfunction process_survey_question(this_row,row_no){\r\n\r\n  if(this_row.values == \"\"){\r\n    this_row.values = this_row.answers;\r\n  }\r\n\r\n  if(typeof(this_row[\"text\"]) !== \"undefined\" &&\r\n\t\t typeof(this_row[\"type\"]) !== \"undefined\" &&\r\n\t\t this_row['text'].toLowerCase() == \"page_break\" |\r\n\t\t this_row['type'].toLowerCase() == \"page_break\"){\r\n        page_break_management.breaks_remaining++;\r\n        question_td = \"</tr></table><table id='table\" + page_break_management.breaks_remaining + \"' style='display:none' class='table_break'></tr>\";\r\n  } else {\r\n\r\n    if(typeof(this_row[\"values\"]) !== \"undefined\" & typeof(this_row[\"values\"]) !== \"function\"){ //to address microsoft edge issue.\r\n      value_array = this_row[\"values\"].split(\"|\");\r\n    } else {\r\n      value_array='';\r\n    }\r\n\r\n    if(this_row[\"item_name\"].indexOf(\" \") !== -1){\r\n      bootbox.alert(\"Please note that the 'item name' '\" + this_row['item_name'] + \"' is invalid because it has at least one space. Please use underscores instead of spaces. If you're not the creator of this task, please contact the person who created it.\");\r\n    }\r\n\r\n    // class for scoring\r\n    this_class = \"\";\r\n    for(var i=0;i<scoring_object.scales.length;i++){\r\n      if(this_row[scoring_object.scales[i].toLowerCase()]==\"1\"){\r\n        this_class += scoring_object.scales[i].toLowerCase().replace(\"score: \",\"\").replace(/ |-/,\"\")+\" \";\r\n      }\r\n      if(this_row[scoring_object.scales[i].toLowerCase()]==\"r1\"){\r\n        this_class += scoring_object.scales[i].toLowerCase().replace(\"score: \",\"\").replace(\" \",\"_\")+\"-r1 \";\r\n      }\r\n    }\r\n\r\n    [feedback_array,feedback_color] = retrieve_feedback(this_row);\r\n\r\n    response_html = '<input type=\"hidden\" class=\"response_element row_'+row_no+'\" id=\"survey_'+this_row[\"item_name\"].toLowerCase()+'_response\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'_response\"  value=\"\">';\r\n\r\n\r\n    // Survey settings\r\n    ////////////////////\r\n\r\n    [row_ques_perc,row_resp_perc] = quest_resp_perc(this_row[\"question_width\"]);\r\n\r\n    if(typeof(settings.feedback_before_response) == \"undefined\"){\r\n        settings.feedback_before_response = true;\r\n    }\r\n\r\n    if(typeof(settings.lock_after_feedback) == \"undefined\"){\r\n        settings.lock_after_feedback = false;\r\n    }\r\n    var question_td='';\r\n\r\n    if(typeof(this_row[\"type\"]) == \"undefined\"){\r\n        return false;\r\n    }\r\n\r\n    // Item types\r\n    ///////////////\r\n\r\n    if(typeof(survey_obj.mods) !== \"undefined\" &&\r\n\t\t\t typeof(survey_obj.mods[this_row.type]) !== \"undefined\"){\r\n\r\n      var mod_html = survey_obj.mods[this_row.type].contents;\r\n\r\n      //for each row variable, insert it into the mod if possible?\r\n      Object.keys(this_row).forEach(function(attribute){\r\n        mod_html = mod_html.replaceAll(\"{{\"+attribute+\"}}\",this_row[attribute]);\r\n      });\r\n      question_td += mod_html;\r\n    } else {\r\n\r\n      switch(this_row[\"type\"].toLowerCase()){\r\n        case \"page_start\":\r\n          var tabs_html = $(\"#survey_tabs\").html();\r\n          if(settings.tab_hor_vert == \"horizontal\"){\r\n            span_div = \"span\";\r\n          } else if(settings.tab_hor_vert == \"vertical\"){\r\n            span_div = \"div\";\r\n          }\r\n          if(typeof(survey_obj.tabs) == \"undefined\"){\r\n            survey_obj.tabs = 0;\r\n          } else {\r\n            survey_obj.tabs++;\r\n          }\r\n          if(survey_obj.tabs == 0){ //i.e. is the first tab\r\n            active_button = \"btn-outline-primary active\";\r\n          } else {\r\n            active_button = \"btn-secondary disabled\";\r\n          }\r\n          if(settings.tab_hor_vert == \"vertical\"){\r\n            var vert_btn_block = \"btn-block\";\r\n          } else {\r\n            var vert_btn_block = \"\";\r\n          }\r\n\r\n          tabs_html +=  '<'+span_div+' class=\"btn-group-toggle\" data-toggle=\"buttons\">'+\r\n            '<label id=\"tab_' + survey_obj.tabs + '_button\" class=\"btn show_tab '+active_button+' '+vert_btn_block+'\">'+\r\n              '<input type=\"checkbox\" checked autocomplete=\"off\">'+ this_row['text'] +\r\n            '</label>'+\r\n          '</'+span_div+'>';\r\n\r\n          $(\"#survey_tabs\").html(tabs_html);\r\n\r\n          page_break_indexes = [];\r\n          survey_obj.data.forEach(function(this_row,this_index){\r\n            if(typeof(this_row.type) !== \"undefined\" && this_row.type.toLowerCase() == \"page_start\"){\r\n              page_break_indexes.push(this_index);\r\n            }\r\n          });\r\n\r\n          if(survey_obj.tabs > 0){\r\n            question_td += \"</td><td></td></tr></table></div><div class='survey_page' id='tab_\"+survey_obj.tabs+\"' style='display:none'><table id='table_\"+survey_obj.tabs+\"' class='table_break'><tr>\";\r\n          } else {\r\n            question_td += \"</td><td></td></tr></table><div class='survey_page' id='tab_\"+survey_obj.tabs+\"' ><table id='table_\"+survey_obj.tabs+\"' class='table_break'><tr>\";\r\n          }\r\n        break;\r\n\r\n        case \"checkbox\":\r\n        case \"checkbox_vertical\":\r\n          var options = this_row[\"answers\"].split(\"|\");\r\n          question_td +=  response_html;\r\n          for(var i=0; i<options.length;i++){\r\n            feedback_string = generate_feedback_string(feedback_array,i,feedback_color,row_no,this_row);\r\n            question_td +=  '<div class=\"custom-control custom-checkbox\">'+\r\n                '<input type=\"checkbox\" class=\"custom-control-input '+this_class+' custom-control custom-checkbox '+this_row[\"item_name\"]+'_item row_'+row_no+'\" id=\"'+this_row[\"item_name\"]+ i +'\"  onchange=\"response_check(this)\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+\r\n                '<label class=\"custom-control-label\" for=\"'+this_row[\"item_name\"]+i+'\">'+options[i]+'</label>'+\r\n                feedback_string +\r\n            '</div>';\r\n          }\r\n          break;\r\n\r\n          case \"checkbox_horizontal\":\r\n            feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n            var options = this_row[\"answers\"].split(\"|\");\r\n            question_td += response_html;\r\n            question_td += '<table><tr>';\r\n            for(var i=0; i<options.length;i++){\r\n              question_td +=  '<td>'+\r\n                                '<div class=\"custom-control custom-checkbox\">'+\r\n                                  '<input type=\"checkbox\" class=\"custom-control-input '+this_class+' custom-control custom-checkbox '+this_row[\"item_name\"]+'_item row_'+row_no+'\" id=\"'+this_row[\"item_name\"]+ i +'\"  onchange=\"response_check(this)\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+\r\n                                    '<label class=\"custom-control-label\" for=\"'+this_row[\"item_name\"]+i+'\">'+options[i]+'</label>'+\r\n                                '</div>'+\r\n                              '</td>';\r\n            }\r\n            question_td += '</tr></table>'+feedback_string;\r\n          break;\r\n\r\n          case \"checkbox_single\":\r\n            feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n            var this_option = this_row[\"answers\"];\r\n            question_td +=  response_html +\r\n                            '<div class=\"btn-group-toggle\" data-toggle=\"buttons\">'+\r\n                                '<label class=\"btn btn-outline-primary\">'+\r\n                                    '<input type=\"checkbox\" class=\"'+this_row[\"item_name\"]+'_item row_'+row_no+'\"  checked autocomplete=\"off\" id=\"'+this_row[\"item_name\"]+'\" onchange=\"response_check(this)\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+ this_option +\r\n                                '</label>'+\r\n                            '</div>' + feedback_string;\r\n          break;\r\n\r\n          case \"date\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              question_td+=   response_html+\r\n                              \"<input onchange='response_check(this)' class='custom-control datepicker date \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' type='text' name='survey_\"+this_row['item_name'].toLowerCase()+\"'>\"+\r\n                              feedback_string;\r\n          break;\r\n\r\n          case \"dropdown\":\r\n\t\t\t\t\tcase \"select\":\r\n              feedback_string = generate_feedback_string(feedback_array,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t 0,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t feedback_color,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t row_no,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t this_row);\r\n              var options = this_row[\"answers\"].split(\"|\");\r\n              question_td += response_html +\r\n\t\t\t\t\t\t\t\t'<select ' +\r\n\t\t\t\t\t\t\t\t\t'class=\"custom-select ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'text-primary ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis_row[\"item_name\"] +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'_item row_' + row_no +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'collector_button \"' +\r\n\t\t\t\t\t\t\t\t\t\t'onchange=\"response_check(this)\" ' +\r\n\t\t\t\t\t\t\t\t\t\t'name=\"survey_' + this_row[\"item_name\"].toLowerCase() + '\">' +\r\n\t\t\t\t\t\t\t\t\t\t'<option selected disabled hidden>-- no option selected --</option>';\r\n              for(var i=0; i<options.length;i++){\r\n\t\t\t\t\t\t\t\tquestion_td += \"<option>\" + options[i] + \"</option>\";\r\n              }\r\n              question_td += '</select>' + feedback_string;\r\n          break;\r\n\r\n          case \"email\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              question_td += response_html+\"<input class='form-control type='email' \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' onchange='response_check(this)' type='text' name='survey_\"+this_row['item_name'].toLowerCase()+\"'>\";\r\n              question_td += feedback_string;\r\n          break;\r\n\r\n          case \"google_slide\":\r\n          case \"instruct\":\r\n              //question_td += </td>\"; // \"<span class='text-primary'>\" + this_row[\"text\"] + \"</span>\";\r\n          break;\r\n\r\n          // tidy up this code for nice looking buttons\r\n          case \"likert\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              var options  = this_row[\"answers\"].split(\"|\");\r\n\r\n\t\t\t\t\t\t\tif(typeof(this_row[\"values\"]) == \"undefined\"){\r\n                this_row[\"values\"] = this_row[\"answers\"];\r\n              }\r\n\r\n\t\t\t\t\t\t\tif(typeof(this_row[\"btn_width\"]) !== \"undefined\" && this_row[\"btn-width\"]  !== \"\"){\r\n\t\t\t\t\t\t\t\tvar btn_style = \"width:\" + this_row[\"btn_width\"];\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvar btn_style = \"\";\r\n\t\t\t\t\t\t\t}\r\n\r\n              if(typeof(this_row[\"side_width\"]) !== \"undefined\"){\r\n                var side_width = \"max-width:\" + this_row[\"side_width\"] + \";\" +\r\n                                 \"min-width:\" + this_row[\"side_width\"] + \";\";\r\n              } else {\r\n                var side_width = \"\";\r\n              }\r\n\r\n              var values   = this_row[\"values\"].split(\"|\");\r\n              question_td += \t\"<table class='likert_table'>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"<tr>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"<td style='\" + side_width + \"'>\";\r\n\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t* Add side_text if it exists\r\n\t\t\t\t\t\t\t*/\r\n\r\n\t\t\t\t\t\t\tif(typeof(this_row[\"side_text\"]) !== \"undefined\" &&\r\n\t\t\t\t\t\t\t\tthis_row[\"side_text\"] !== \"\"){\r\n\t\t\t\t\t\t\t\tside_text = this_row[\"side_text\"].split(\"|\");\r\n\t\t\t\t\t\t\t\tside_text = side_text.map(function(this_side){\r\n\t\t\t\t\t\t\t\t\treturn \"<span style='\" + side_width + \" padding:20px;' class='text-primary'><b>\" + this_side + \"</b></span></td><td>\";\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tside_text = [\"\",\"\"];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tquestion_td += side_text[0];\r\n\r\n\t\t\t\t\t\t\tquestion_td +=  response_html +\r\n                              '<div class=\"btn-group btn-group-toggle\" data-toggle=\"buttons\">'; //to help detect blank likert's\r\n\r\n\r\n\t\t\t\t\t\t\tfor(var i=0; i<options.length;i++){\r\n                var this_option = clean_item(options[i]);\r\n                question_td +=  '<button type=\"button\" '+\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'class=\"btn '+\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t 'survey_btn ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t 'btn-outline-primary ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t this_row[\"item_name\"] + '_item row_' + row_no +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t '\"autocomplete=\"off\"' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'id = \"likert_' + row_no + '_' + i + '\" ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'style = \"' + btn_style + '\" ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'onclick=\"likert_update(this,\\''+this_option+'\\',\\''+values[i]+'\\')\">'+\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis_option +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'</button>';\r\n\r\n              }\r\n\t\t\t\t\t\t\tquestion_td +=  \"</div></td><td  style='\" + side_width + \"'>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tside_text[1] +\r\n                              \"<input type='hidden' class='\"+this_class+\"' id='survey_\"+this_row[\"item_name\"].toLowerCase()+\"_score' name='survey_\"+this_row[\"item_name\"].toLowerCase()+\"_score'></td>\"+\r\n                          \"</td>\"+\r\n                      \"</tr>\"+\r\n                  \"</table>\"+feedback_string;\r\n          break;\r\n\r\n          case \"number\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              question_td += response_html +\"<input type='number'  onchange='response_check(this)' class='form-control \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' name='survey_\"+this_row['item_name'].toLowerCase()+\"'>\" + feedback_string;\r\n          break;\r\n\r\n          case \"para\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              question_td += response_html+\"<textarea name='survey_\"+this_row['item_name'].toLowerCase()+\"' class='\"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' onchange='response_check(this)' style='width:100%;height:200px'></textarea>\";\r\n              question_td += feedback_string;\r\n          break;\r\n\r\n          case \"radio\":\r\n          case \"radio_vertical\":\r\n            var options = this_row[\"answers\"].split(\"|\");\r\n            var values   = this_row[\"values\"].split(\"|\");\r\n            question_td +=  response_html;\r\n            for(var i=0; i<options.length;i++){\r\n              feedback_string = generate_feedback_string(feedback_array,i,feedback_color,row_no,this_row);\r\n\r\n              question_td +=  '<div class=\"custom-control custom-radio\">'+\r\n                                '<input type=\"radio\" class=\"custom-control-input '+this_class+'  onclick=\"likert_update(this,\\''+options[i]+'\\',\\''+values[i]+'\\')\" custom-control custom-radio '+this_row[\"item_name\"]+'_item row_'+row_no+'\" id=\"'+this_row[\"item_name\"]+ i +'\"  onchange=\"response_check(this)\" value=\"' + options[i] + '\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+\r\n                                '<label class=\"custom-control-label\" for=\"'+this_row[\"item_name\"]+i+'\">'+options[i]+'</label>'+\r\n                                  feedback_string +\r\n                              '</div>';\r\n\r\n\r\n            }\r\n            question_td +=  \"<input type='hidden' class='\"+this_class+\"' id='survey_\"+this_row[\"item_name\"].toLowerCase()+\"_score' name='survey_\"+this_row[\"item_name\"].toLowerCase()+\"_score'>\";\r\n          break;\r\n\r\n          case \"radio_horizontal\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              var options = this_row[\"answers\"].split(\"|\");\r\n              question_td +=  response_html;\r\n              for(var i=0; i<options.length;i++){\r\n                  question_td +=  '<div class=\"custom-control custom-radio custom-control-inline\">'+\r\n                                      '<input type=\"radio\" class=\"custom-control-input '+this_class+' custom-control custom-radio '+this_row[\"item_name\"]+'_item row_'+row_no+'\" id=\"'+this_row[\"item_name\"]+ i +'\"  onchange=\"response_check(this)\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+\r\n                                      '<label class=\"custom-control-label\" for=\"'+this_row[\"item_name\"]+i+'\">'+options[i]+'</label>'+\r\n                                      '<div class=\"invalid-feedback\">Example invalid feedback text</div>'+\r\n                                  '</div>'\r\n              }\r\n              question_td += feedback_string;\r\n          break;\r\n\r\n          case \"report_score\":\r\n              question_td += \"<input disabled class='form-control score_\" + this_row[\"item_name\"] + \" \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' type='text' name='survey_\"+this_row['item_name'].toLowerCase()+\"'>\";\r\n          break;\r\n\r\n          case \"text\":\r\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\r\n              question_td += response_html+\"<input class='form-control \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' onchange='response_check(this)' type='text' name='survey_\"+this_row['item_name'].toLowerCase()+\"'>\";\r\n              question_td += feedback_string;\r\n          break;\r\n\r\n      }\r\n    }\r\n    if(feedback_array){\r\n        question_td += \"<button class='btn btn-outline-info feedback_btn \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' data-toggle='tooltip' id='reveal_\"+this_row[\"item_name\"].toLowerCase()+\"_feedback'  onclick='reveal_answers(this)'>Show</button>\";\r\n    }\r\n  }\r\n//  question_td += '</td>';\r\n\r\n  if(typeof(this_row[\"type\"])== \"undefined\"){\r\n      return '';\r\n  } else {\r\n    if(this_row[\"type\"].toLowerCase() == \"instruct\"){\r\n      var this_row_html = \"<td colspan='2'>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis_row[\"text\"] +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"</td>\";\r\n\t\t} else if(this_row[\"type\"].toLowerCase() == \"likert\"){\r\n\r\n\t\t\tif(typeof(this_row[\"side_by_side\"]) !== \"undefined\" &&\r\n\t\t\t\t this_row[\"side_by_side\"].toLowerCase() == \"yes\"){\r\n\r\n\t\t\t\tvar this_row_html=\"<td class='text-primary' id='survey_\"+this_row[\"item_name\"].toLowerCase().replace(\" \",\"_\")+\"_question' style='width:\"+row_ques_perc+\"; text-align:right'>\"+this_row[\"text\"]+\"</td><td>\"+question_td+\"</label></td>\";\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar this_row_html = \"<tr>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"<td colspan='2'>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis_row[\"text\"] +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"</td>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"</tr>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"<tr>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"<td colspan='2' align='center'>\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tquestion_td +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"</td>\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"</tr>\";\r\n\r\n\t\t\t}\r\n\r\n\r\n    } else if(this_row[\"type\"].toLowerCase()==\"google_slide\") {\r\n      var this_row_html=\"<td colspan='2'>\"+this_row[\"text\"]+\"</label></td>\";\r\n    } else if(typeof(this_row[\"no_text\"]) !== \"undefined\" && this_row[\"no_text\"] == \"on\"){\r\n      var this_row_html=\"<td colspan='2'>\"+question_td+\"</td>\";\r\n    } else {\r\n      if(this_row['text'].toLowerCase() == \"page_start\" | this_row['type'].toLowerCase() == \"page_start\"){\r\n        this_row_html = question_td;\r\n      }else {\r\n        var this_row_html=\"<td class='text-primary' id='survey_\"+this_row[\"item_name\"].toLowerCase().replace(\" \",\"_\")+\"_question' style='width:\"+row_ques_perc+\"; text-align:right'>\"+this_row[\"text\"]+\"</td><td>\"+question_td+\"</label></td>\";\r\n      }\r\n    }\r\n    if(typeof(this_row[\"optional\"]) !== \"undefined\"){\r\n      if(this_row[\"optional\"].toLowerCase() == \"no\"){\r\n        proceed_object.name.push(this_row[\"item_name\"]);\r\n        proceed_object.type.push(this_row[\"type\"]);\r\n        proceed_object.break_no.push(page_break_management.breaks_remaining);\r\n      }\r\n    }\r\n    if(typeof(this_row[\"shuffle\"]) == \"undefined\" || this_row[\"shuffle\"].toLowerCase() == \"off\"){\r\n      this_shuffle='none';\r\n    } else {\r\n      this_shuffle=this_row[\"shuffle\"];\r\n    }\r\n    return [this_row_html,this_shuffle];\r\n  }\r\n}\r\n\r\nfunction quest_resp_perc(quest_resp_rat){\r\n\tif(typeof(quest_resp_rat) == \"undefined\"){\r\n    row_resp_perc = \"50%\";\r\n    row_ques_perc = \"50%\";\r\n  } else {\r\n    row_resp_perc = parseFloat(100-quest_resp_rat.replace(\"%\",\"\"))+\"%\";\r\n    row_ques_perc = parseFloat(quest_resp_rat.replace(\"%\",\"\"))+\"%\";\r\n  }\r\n  return [row_ques_perc,row_resp_perc];\r\n}\r\n\r\nfunction response_check(submitted_element){\r\n  console.dir(\"submitted_element\");\r\n  console.dir(submitted_element);\r\n  switch(submitted_element.type){\r\n    case \"checkbox\":\r\n      var checked_responses = $(\"[name='\"+submitted_element.name+\"']:checked\");\r\n      if(checked_responses.length){ //i.e. more than 0\r\n        var values = [];\r\n        for(var i = 0; i < checked_responses.length; i++){\r\n          values.push(checked_responses[i].value);\r\n        }\r\n        $(\"#\"+submitted_element.name+\"_response\").val(JSON.stringify(values));\r\n      } else {\r\n        $(\"#\"+submitted_element.name+\"_response\").val(\"\");\r\n      }\r\n      break;\r\n\r\n      case \"button\":\r\n        $(\"#\"+submitted_element.name+\"_response\").val(submitted_element.innerHTML);\r\n      break;\r\n\r\n      case \"number\":\r\n      case \"select-one\":\r\n      case \"text\":\r\n      case \"textarea\":\r\n        $(\"#\"+submitted_element.name+\"_response\").val(submitted_element.value);\r\n      break;\r\n\r\n\r\n      case \"radio\":\r\n        $(\"#\"+submitted_element.name+\"_response\").val(submitted_element.value);\r\n      break;\r\n    }\r\n    update_score();\r\n}\r\n\r\nfunction retrieve_feedback(this_row){\r\n  if(typeof(this_row[\"feedback\"]) !== \"undefined\" && this_row[\"feedback\"] !== \"\"){\r\n    feedback_array = this_row[\"feedback\"].split(\"|\");\r\n    if(typeof(this_row[\"feedback_color\"]) == \"undefined\"){\r\n      bootbox.alert(\"The color for the feedback options has not been set. If you created this questionnaire, please add a column 'feedback_color' to your survey and separate the colors by a pipe (|) character.\");\r\n    }\r\n    feedback_color = this_row[\"feedback_color\"].split(\"|\");\r\n  } else {\r\n    feedback_array = null;\r\n    feedback_color = '';\r\n  }\r\n  return [feedback_array,feedback_color];\r\n}\r\n\r\nfunction retrieve_row_no_item_name(this_element){\r\n  var these_classes = this_element.className.split(\" \");\r\n  var row_no;\r\n  var item_name;\r\n  these_classes.forEach(function(this_class){\r\n    if (this_class.indexOf('row_') > -1) {\r\n      row_no = this_class.replace(\"row_\",\"\");\r\n    }\r\n    if (this_class.indexOf('_item') > -1) {\r\n      item_name = this_class.replace(\"_item\",\"\").toLowerCase();\r\n    }\r\n  });\r\n  return [row_no,item_name];\r\n}\r\n\r\nfunction reveal_answers(this_element){\r\n  var this_response = $(\"#\"+this_element.id.replace(\"reveal_\",\"survey_\").replace(\"_feedback\",\"_response\")).val();\r\n  response_present = this_response == \"\" ? false : true;\r\n\r\n  if(settings.feedback_before_response == false && response_present == false){\r\n    bootbox.alert(\"Please respond before trying reveal the feedback.\")\r\n  } else {\r\n    if($(\"#\"+this_element.id).hasClass(\"btn-outline-info\")){\r\n      $(\".\"+this_element.id.replace(\"reveal_\",\"\")).show(500);\r\n      if(settings.lock_after_feedback){\r\n        var item_class = this_element.id.replace(\"_feedback\",\"_item\").replace(\"reveal_\",\"\");\r\n        $(\".\"+item_class).prop(\"disabled\",true);\r\n        document.getElementsByClassName(item_class).title = \"The person creating this content has set it so that your answers are locked in once you have chosen to see the feedback\";\r\n        $(\"#\"+this_element.id).addClass(\"btn-info\");\r\n        $(\"#\"+this_element.id).removeClass(\"btn-outline-info\");\r\n        $(\"#\"+this_element.id).html(\"Locked\");\r\n        document.getElementById(this_element.id).title = 'The person creating this content has set it so that your answers are locked in once you have chosen to see the feedback';\r\n        $(\"#\"+this_element.id).addClass(\"disabled\");\r\n      } else {\r\n        $(\"#\"+this_element.id).html(\"Hide\");\r\n        $(\"#\"+this_element.id).removeClass(\"btn-outline-info\");\r\n        $(\"#\"+this_element.id).addClass(\"btn-info\");\r\n      }\r\n    } else {\r\n      $(\"#\"+this_element.id).html(\"Show\");\r\n      $(\".\"+this_element.id.replace(\"reveal_\",\"\")).hide(500);\r\n      $(\"#\"+this_element.id).addClass(\"btn-outline-info\");\r\n      $(\"#\"+this_element.id).removeClass(\"btn-info\");\r\n    }\r\n  }\r\n}\r\n\r\nfunction shuffle(array) {                                   // http://stackoverflow.com/questions/962802#962890\r\n  var tmp, current, top = array.length;\r\n  if(top) while(--top) {\r\n    current = Math.floor(Math.random() * (top + 1));\r\n    tmp = array[current];\r\n    array[current] = array[top];\r\n    array[top] = tmp;\r\n  }\r\n  return array;\r\n}\r\n\r\nfunction update_score(){\r\n  var scales = Object.keys(survey_obj.scales);\r\n  scales.forEach(function(scale){\r\n    this_scale = survey_obj.scales[scale];\r\n    var questions = Object.keys(this_scale.questions);\r\n    var this_score = 0;\r\n    complete_score = true;\r\n\r\n    questions.forEach(function(row_no){\r\n      var item = survey_obj.data[row_no].item_name.toLowerCase();\r\n      var this_response = $(\"#survey_\"+item+\"_response\").val(); //response\r\n      var normal_reverse = this_scale.questions[row_no];\r\n\r\n      if(normal_reverse.indexOf(\"-\") == -1){\r\n        var multiplier = parseFloat(normal_reverse.replace(\"r\",\"\"));\r\n        if(normal_reverse.indexOf(\"r\") == 0){ //reverse the values\r\n          this_value = process_item_score(survey_obj,row_no,\"values\",this_response,item,\"r\");\r\n        } else {\r\n          this_value = process_item_score(survey_obj,row_no,\"values\",this_response,item);\r\n        }\r\n      } else {\r\n        values_reverse = normal_reverse.split(\"-\");\r\n        values_col     = values_reverse[0].toLowerCase();\r\n        normal_reverse = values_reverse[1];\r\n        var multiplier = parseFloat(normal_reverse.replace(\"r\",\"\"));\r\n\r\n        if(normal_reverse.indexOf(\"r\") == 0){ //reverse the values\r\n          this_value = process_item_score(survey_obj,row_no,values_col,this_response,item,\"r\");\r\n        } else {\r\n          this_value = process_item_score(survey_obj,row_no,values_col,this_response,item);\r\n        }\r\n      }\r\n      if(typeof(this_value) !== \"undefined\"){\r\n        this_score += multiplier * this_value;\r\n      } else {\r\n        complete_score = false;\r\n      }\r\n    });\r\n    if(complete_score){\r\n      $(\".score_\"+scale).addClass(\"bg-success\");\r\n      $(\".score_\"+scale).removeClass(\"bg-danger\");\r\n      $(\".score_\"+scale).addClass(\"text-light\");\r\n      document.getElementsByClassName(\"score_\"+scale).title = 'All relevant questions have been answered';\r\n    } else {\r\n      $(\".score_\"+scale).removeClass(\"text-success\");\r\n      $(\".score_\"+scale).addClass(\"bg-danger\");\r\n      $(\".score_\"+scale).addClass(\"text-light\");\r\n      document.getElementsByClassName(\"score_\"+scale).title = 'At least one relevant questions has NOT been answered';\r\n    }\r\n    $(\".score_\"+scale).val(this_score);\r\n  });\r\n}\r\n\r\nfunction write_survey(this_survey,this_id){\r\n  scoring_object.update_scales(this_survey);\r\n  this_survey_html = \"<table class='table_break' id='table0'>\";\r\n  this_survey_object={\r\n    content:[],\r\n    shuffle:[],\r\n    content_new_order:[],\r\n    shuffled_content:[],\r\n    shuffled_arrays:{},\r\n  }\r\n\r\n  this_survey_html += \"<tr>\";\r\n  for(i = 0; i < this_survey.length; i++){\r\n    this_row = this_survey[i];\r\n    row_html = process_survey_question(this_row,i);\r\n\t\tthis_survey_object.content.push(row_html[0]);\r\n    this_survey_object.shuffle.push(row_html[1]);\r\n\t}\r\n\r\n\tunique_shuffles = this_survey_object.shuffle.filter((v,i,a)=>a.indexOf(v)==i); //by Camilo Martin on https://stackoverflow.com/questions/1960473/unique-values-in-an-array\r\n\r\n\tfor(var i=0;i<unique_shuffles.length;i++){\r\n    if(typeof(unique_shuffles[i]) !== \"undefined\" &&\r\n      unique_shuffles[i] !== \"none\" &&\r\n      unique_shuffles[i] !== \"\"){\r\n        shuffled_content = this_survey_object.shuffle.map(function(element,index){\r\n    \t   if(typeof(element)!== \"undefined\" && element.toLowerCase() !== \"none\" && element.toLowerCase() == unique_shuffles[i]){\r\n  \t       return this_survey_object.content[index];\r\n    \t   }\r\n    \t}).filter(elm => typeof(elm) !== \"undefined\");\r\n    \tnew_order = shuffle(shuffled_content);\r\n    \tthis_survey_object.shuffled_arrays[unique_shuffles[i]]=new_order; // add new array with dynamic name\r\n    }\r\n\t}\r\n\r\n\t// loop through lists, taking one off from the shuffled list and replacing the row with one from the shuffled list\r\n\tfor(var i=0;i<this_survey_object.content.length;i++){\r\n    var this_index = Object.keys(this_survey_object.shuffled_arrays).indexOf(this_survey_object.shuffle[i]);\r\n    if(this_index !== -1){\r\n      //take first item off relevant list and delete item\r\n      var this_item = this_survey_object.shuffled_arrays[Object.keys(this_survey_object.shuffled_arrays)[this_index]].shift();\r\n      this_survey_object.content_new_order[i]=this_item;\r\n    } else {\r\n      this_survey_object.content_new_order[i]=this_survey_object.content[i];\r\n    }\r\n\t}\r\n\r\n\tquestions_in_order = this_survey_object.content_new_order.join(\"</tr><tr>\");\r\n\tquestions_in_order += \"</tr>\";\r\n\r\n\tthis_survey_html += questions_in_order;\r\n\tthis_survey_html += \"</table>\";\r\n\r\n\t$(\"#\" + this_id).html(this_survey_html);\r\n\r\n\t$(\"#\" + this_id).show(1000,function(){\r\n\t\t// Set all buttons to the max width\r\n\t\t/*\r\n\t\tvar maxWidth = 0;\r\n\t\t$('.btn').each(function(index, element) {\r\n\t\t\tvar curWidth = $(element).width();\r\n\t\t\tif (maxWidth < curWidth ) {\r\n\t\t\t\tmaxWidth = curWidth;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$('.survey_btn').each(function(i) {\r\n\t\t\t$(this).delay(200).animate({\r\n\t\t\t\t\"width\" : maxWidth\r\n\t\t\t});\r\n\t\t});\r\n\t\t*/\r\n\t});\r\n\r\n\t//scroll to top\r\n\r\n\r\n\t$(\".show_tab\").on(\"click\",function(){\r\n    if(this.className.indexOf(\"disabled\") == -1){\r\n      $(\".show_tab\").removeClass(\"active\");\r\n      $(\".survey_page\").hide();\r\n      $(\"#\"+this.id.replace(\"_button\",\"\")).show();\r\n    } else {\r\n      bootbox.alert(\"You have not yet unlocked this tab - maybe try clicking on <b>Proceed</b>?\");\r\n    }\r\n\t});\r\n  $('[data-toggle=\"tooltip\"]').tooltip();\r\n  $(\".custom-checkbox\").prop(\"indeterminate\",true);\r\n}\r\n\r\n//////////////////\r\n// Load survey  //\r\n//////////////////\r\ncurrent_survey = \"{{survey}}\";\r\nif(typeof(Trial) !== \"undefined\"){  // This check is to help this code work when previewing trialtypes\r\n  Trial.set_timer(function(){       // This chunk is for when the survey is run within an actual trial\r\n    load_survey(current_survey);\r\n  },100);\r\n} else {                            // This chunk is for when the survey is being previewed in the \"survey editor\"\r\n  load_survey(current_survey);\r\n}\r\n\r\n\r\n</script>\r\n"
  },
  "conditions": "name,notes,stimuli,procedure,fullscreen,welcome,participant_id,end_message,start_message,buffer,scripts,\r\ncondition_1,You can put more detailed notes in this field,stimuli_1.csv,procedure_1.csv,off,,on,,,5,,",
  "location": "haffey-studies/bsc-2020",
  "storage_scripts": {
    "ocollector.org": "https://ocollector.org/StoreData10_aodirnkcu73hsjd8.php"
  },
  "mods": {},
  "procs_csv": {},
  "stims_csv": {}
}